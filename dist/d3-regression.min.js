!function(n,r){"object"==typeof exports&&"undefined"!=typeof module?r(exports):"function"==typeof define&&define.amd?define(["exports"],r):(n=n||self,r(n.d3=n.d3||{}))}(this,function(n){"use strict";function r(n,r){return n.sort(function(n,t){return r(n)-r(t)})}function t(){function n(n){r(n,e);for(var u=n.length,a=0,f=0,i=0,h=0,c=0,v=0;v<n.length;v++){var l=n[v],s=e(l),g=o(l);a+=g,f+=s*s*g,i+=g*Math.log(g),h+=s*g*Math.log(g),c+=s*g}for(var p=a*f-c*c,M=Math.exp((f*i-c*h)/p),d=(a*h-c*i)/p,w=function(n){return M*Math.exp(d*n)},b=[],x=0,y=0,m=0;m<u;m++){var q=n[m],S=e(q),j=o(q),k=w(S);x+=Math.pow(j-k,2),y+=Math.pow(j-a/u,2),b[m]=[S,k]}var L=1-x/y;if(t){var _=t[0],B=t[1];_!==e(n[0])&&b.unshift([_,w(_)]),B!==e(n[n.length-1])&&b.push([B,w(B)])}return b.a=M,b.b=d,b.rSquared=L,b}var t,e=function(n){return n[0]},o=function(n){return n[1]};return n.domain=function(r){return arguments.length?(t=r,n):t},n.x=function(r){return arguments.length?(e=r,n):e},n.y=function(r){return arguments.length?(o=r,n):o},n}function e(){function n(n){for(var o=n.length,u=0,a=0,f=0,i=0,h=r?+r[0]:1/0,c=r?+r[1]:-(1/0),v=0;v<o;v++){var l=t(n[v]),s=e(n[v]);u+=l,a+=s,f+=l*s,i+=l*l,r||(l<h&&(h=l),l>c&&(c=l))}for(var g=o*f,p=u*a,M=o*i,d=u*u,w=(g-p)/(M-d),b=a,x=w*u,y=(b-x)/o,m=0,q=0,S=0;S<o;S++){var j=n[S],k=t(j),L=e(j),_=function(n){return w*n+y}(k);m+=Math.pow(L-_,2),q+=Math.pow(L-a/o,2)}var B=1-m/q,E=[[h,h*w+y],[c,c*w+y]];return E.slope=w,E.intercept=y,E.rSquared=B,E}var r,t=function(n){return n[0]},e=function(n){return n[1]};return n.domain=function(t){return arguments.length?(r=t,n):r},n.x=function(r){return arguments.length?(t=r,n):t},n.y=function(r){return arguments.length?(e=r,n):e},n}function o(n){n.sort(function(n,r){return n-r});var r=n.length/2;return r%1==0?(n[r-1]+n[r])/2:n[Math.floor(r)]}function u(){function n(n){r(n,t);for(var l=n.length,s=[],g=[],p=[],M=0;M<l;M++){p[M]=1;var d=n[M];s[M]=t(d),g[M]=e(d)}a(s),a(g),a(p),f(s);var w=Math.floor(u*l);if(w<2)throw{error:"Bandwidth too small."};for(var b=[],x=[],y=[],m=0;m<l;m++)b[m]=0,x[m]=0,y[m]=1;for(var q=-1;++q<=c;){for(var S=[0,w-1],j=void 0,k=0;k<l;k++){j=s[k],k>0&&h(s,p,k,S);for(var L=S[0],_=S[1],B=s[k]-s[L]>s[_]-s[k]?L:_,E=0,F=0,O=0,P=0,Q=0,z=Math.abs(1/(s[B]-j)),A=L;A<=_;++A){var C=s[A],D=g[A],G=A<k?j-C:C-j,H=i(G*z)*y[A]*p[A],I=C*H;E+=H,F+=I,O+=C*I,P+=D*H,Q+=D*I}var J=F/E,K=P/E,N=Q/E,R=O/E,T=Math.sqrt(Math.abs(R-J*J))<v?0:(N-J*K)/(R-J*J),U=K-T*J;b[k]=T*j+U,x[k]=Math.abs(g[k]-b[k])}if(q===c)break;var V=o(x);if(Math.abs(V)<v)break;for(var W=void 0,X=void 0,Y=0;Y<l;Y++)W=x[Y]/(6*V),y[Y]=W>=1?0:(X=1-W*W)*X}return b.map(function(n,r){return[s[r],n]})}var t=function(n){return n[0]},e=function(n){return n[1]},u=.3,c=2,v=1e-12;return n.bandwidth=function(r){return arguments.length?(u=r,n):u},n.x=function(r){return arguments.length?(t=r,n):t},n.y=function(r){return arguments.length?(e=r,n):e},n}function a(n){for(var r=0,t=n.length;r<t;r++)if(!isFinite(n[r]))return!1;return!0}function f(n){for(var r=0,t=n.length;r<t;r++)if(n[r-1]>=n[r])return!1;return!0}function i(n){return(n=1-n*n*n)*n*n}function h(n,r,t,e){var o=e[0],u=e[1],a=c(r,u);if(a<n.length&&n[a]-n[t]<n[t]-n[o]){var f=c(r,o);e[0]=f,e[1]=a}}function c(n,r){for(var t=r+1;t<n.length&&0===n[t];)t++;return t}function v(){function n(n){r(n,e);for(var u=n.length,a=0,f=0,i=0,h=0,c=0,v=0,l=0,s=0;s<u;s++){var g=n[s],p=e(g),M=o(g),d=Math.pow(p,2);a+=p,f+=M,i+=d,h+=Math.pow(p,3),c+=Math.pow(p,4),v+=p*M,l+=d*M}for(var w=i-Math.pow(a,2)/u,b=v-a*f/u,x=h-i*a/u,y=l-i*f/u,m=c-Math.pow(i,2)/u,q=(y*w-b*x)/(w*m-Math.pow(x,2)),S=(b*m-y*x)/(w*m-Math.pow(x,2)),j=f/u-S*(a/u)-q*(i/u),k=function(n){return q*Math.pow(n,2)+S*n+j},L=[],_=0,B=0,E=0;E<u;E++){var F=n[E],O=e(F),P=o(F),Q=k(O);_+=Math.pow(P-Q,2),B+=Math.pow(P-f/u,2),L[E]=[O,Q]}var z=1-_/B;if(t){var A=t[0],C=t[1];A!==e(n[0])&&L.unshift([A,k(A)]),C!==e(n[n.length-1])&&L.push([C,k(C)])}return L.a=q,L.b=S,L.c=j,L.rSquared=z,L}var t,e=function(n){return n[0]},o=function(n){return n[1]};return n.domain=function(r){return arguments.length?(t=r,n):t},n.x=function(r){return arguments.length?(e=r,n):e},n.y=function(r){return arguments.length?(o=r,n):o},n}n.regressionExponential=t,n.regressionLinear=e,n.regressionLoess=u,n.regressionQuadratic=v,Object.defineProperty(n,"__esModule",{value:!0})});
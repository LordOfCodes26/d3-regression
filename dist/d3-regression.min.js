!function(r,n){"object"==typeof exports&&"undefined"!=typeof module?n(exports):"function"==typeof define&&define.amd?define(["exports"],n):(r=r||self,n(r.d3=r.d3||{}))}(this,function(r){"use strict";function n(){function r(r){for(var o=r.length,u=0,a=0,f=0,i=0,h=n?+n[0]:1/0,c=n?+n[1]:-(1/0),v=0;v<o;v++){var s=t(r[v]),l=e(r[v]);u+=s,a+=l,f+=s*l,i+=s*s,n||(s<h&&(h=s),s>c&&(c=s))}for(var p=o*f,d=u*a,g=o*i,M=u*u,w=(p-d)/(g-M),b=a,y=w*u,m=(b-y)/o,x=0,q=0,j=0;j<o;j++){var k=r[j],L=t(k),S=e(k),_=function(r){return w*r+m}(L);x+=Math.pow(S-_,2),q+=Math.pow(S-a/o,2)}var B=1-x/q,F=[[h,h*w+m],[c,c*w+m]];return F.slope=w,F.intercept=m,F.rSquared=B,F}var n,t=function(r){return r[0]},e=function(r){return r[1]};return r.domain=function(t){return arguments.length?(n=t,r):n},r.x=function(n){return arguments.length?(t=n,r):t},r.y=function(n){return arguments.length?(e=n,r):e},r}function t(r){r.sort(function(r,n){return r-n});var n=r.length/2;return n%1==0?(r[n-1]+r[n])/2:r[Math.floor(n)]}function e(r,n){return r.sort(function(r,t){return n(r)-n(t)})}function o(){function r(r){e(r,n);for(var s=r.length,l=[],p=[],d=[],g=0;g<s;g++){d[g]=1;var M=r[g];l[g]=n(M),p[g]=o(M)}u(l),u(p),u(d),a(l);var w=Math.floor(h*s);if(w<2)throw{error:"Bandwidth too small."};for(var b=[],y=[],m=[],x=0;x<s;x++)b[x]=0,y[x]=0,m[x]=1;for(var q=-1;++q<=c;){for(var j=[0,w-1],k=void 0,L=0;L<s;L++){k=l[L],L>0&&i(l,d,L,j);for(var S=j[0],_=j[1],B=l[L]-l[S]>l[_]-l[L]?S:_,F=0,O=0,P=0,Q=0,z=0,A=Math.abs(1/(l[B]-k)),C=S;C<=_;++C){var D=l[C],E=p[C],G=C<L?k-D:D-k,H=f(G*A)*m[C]*d[C],I=D*H;F+=H,O+=I,P+=D*I,Q+=E*H,z+=E*I}var J=O/F,K=Q/F,N=z/F,R=P/F,T=Math.sqrt(Math.abs(R-J*J))<v?0:(N-J*K)/(R-J*J),U=K-T*J;b[L]=T*k+U,y[L]=Math.abs(p[L]-b[L])}if(q===c)break;var V=t(y);if(Math.abs(V)<v)break;for(var W=void 0,X=void 0,Y=0;Y<s;Y++)W=y[Y]/(6*V),m[Y]=W>=1?0:(X=1-W*W)*X}return b.map(function(r,n){return[l[n],r]})}var n=function(r){return r[0]},o=function(r){return r[1]},h=.3,c=2,v=1e-12;return r.bandwidth=function(n){return arguments.length?(h=n,r):h},r.x=function(t){return arguments.length?(n=t,r):n},r.y=function(n){return arguments.length?(o=n,r):o},r}function u(r){for(var n=0,t=r.length;n<t;n++)if(!isFinite(r[n]))return!1;return!0}function a(r){for(var n=0,t=r.length;n<t;n++)if(r[n-1]>=r[n])return!1;return!0}function f(r){return(r=1-r*r*r)*r*r}function i(r,n,t,e){var o=e[0],u=e[1],a=h(n,u);if(a<r.length&&r[a]-r[t]<r[t]-r[o]){var f=h(n,o);e[0]=f,e[1]=a}}function h(r,n){for(var t=n+1;t<r.length&&0===r[t];)t++;return t}function c(){function r(r){e(r,t);for(var u=r.length,a=0,f=0,i=0,h=0,c=0,v=0,s=0,l=0;l<u;l++){var p=r[l],d=t(p),g=o(p),M=Math.pow(d,2);a+=d,f+=g,i+=M,h+=Math.pow(d,3),c+=Math.pow(d,4),v+=d*g,s+=M*g}for(var w=i-Math.pow(a,2)/u,b=v-a*f/u,y=h-i*a/u,m=s-i*f/u,x=c-Math.pow(i,2)/u,q=(m*w-b*y)/(w*x-Math.pow(y,2)),j=(b*x-m*y)/(w*x-Math.pow(y,2)),k=f/u-j*(a/u)-q*(i/u),L=function(r){return q*Math.pow(r,2)+j*r+k},S=[],_=0,B=0,F=0;F<u;F++){var O=r[F],P=t(O),Q=o(O),z=L(P);_+=Math.pow(Q-z,2),B+=Math.pow(Q-f/u,2),S.push([P,z])}var A=1-_/B;if(n){var C=n[0],D=n[1];S.unshift([C,L(C)]),S.push([D,L(D)])}return S.a=q,S.b=j,S.c=k,S.rSquared=A,S}var n,t=function(r){return r[0]},o=function(r){return r[1]};return r.domain=function(t){return arguments.length?(n=t,r):n},r.x=function(n){return arguments.length?(t=n,r):t},r.y=function(n){return arguments.length?(o=n,r):o},r}r.regressionLinear=n,r.regressionLoess=o,r.regressionQuadratic=c,Object.defineProperty(r,"__esModule",{value:!0})});
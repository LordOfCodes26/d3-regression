!function(n,r){"object"==typeof exports&&"undefined"!=typeof module?r(exports):"function"==typeof define&&define.amd?define(["exports"],r):(n=n||self,r(n.d3=n.d3||{}))}(this,function(n){"use strict";function r(n,r,t,e,o){for(var u=n.length,a=0,i=0,f=0;f<u;f++){var c=n[f],h=r(c),l=t(c),g=o(h);a+=Math.pow(l-g,2),i+=Math.pow(l-e/u,2)}return 1-a/i}function t(n){return 180*Math.atan2(n[1][1]-n[0][1],n[1][0]-n[0][0])/Math.PI}function e(n){return[(n[0][0]+n[1][0])/2,(n[0][1]+n[1][1])/2]}function o(n,r,o){function u(n){return[n,o(n)]}for(var a=.01,i=[u(n),u(r)],f=0;function(n){f++;for(var r=n.length,o=!1,i=0;i<r-1;i++){var c=n[i],h=n[i+1],l=e([c,h]),g=u(l[0]),v=t([c,l]),M=t([c,g]);Math.abs(v-M)>a&&(n.splice(i+1,0,g),o=!0)}return o}(i)&&f<1e4;);return i}function u(){function n(n){for(var a=n.length,i=0,f=0,c=0,h=0,l=0,g=t?+t[0]:1/0,v=t?+t[1]:-(1/0),M=0;M<a;M++){var d=n[M],s=e(d),p=u(d);i+=p,f+=s*s*p,c+=p*Math.log(p),h+=s*p*Math.log(p),l+=s*p,t||(s<g&&(g=s),s>v&&(v=s))}var w=i*f-l*l,b=Math.exp((f*c-l*h)/w),x=(i*h-l*c)/w,y=function(n){return b*Math.exp(x*n)},m=o(g,v,y);return m.a=b,m.b=x,m.predict=y,m.rSquared=r(n,e,u,i,y),m}var t,e=function(n){return n[0]},u=function(n){return n[1]};return n.domain=function(r){return arguments.length?(t=r,n):t},n.x=function(r){return arguments.length?(e=r,n):e},n.y=function(r){return arguments.length?(u=r,n):u},n}function a(){function n(n){for(var u=n.length,a=0,i=0,f=0,c=0,h=t?+t[0]:1/0,l=t?+t[1]:-(1/0),g=0;g<u;g++){var v=e(n[g]),M=o(n[g]);a+=v,i+=M,f+=v*M,c+=v*v,t||(v<h&&(h=v),v>l&&(l=v))}var d=u*f,s=a*i,p=u*c,w=a*a,b=(d-s)/(p-w),x=i,y=b*a,m=(x-y)/u,q=function(n){return b*n+m},S=r(n,e,o,i,q),L=[[h,h*b+m],[l,l*b+m]];return L.a=b,L.b=m,L.predict=q,L.rSquared=S,L}var t,e=function(n){return n[0]},o=function(n){return n[1]};return n.domain=function(r){return arguments.length?(t=r,n):t},n.x=function(r){return arguments.length?(e=r,n):e},n.y=function(r){return arguments.length?(o=r,n):o},n}function i(n){n.sort(function(n,r){return n-r});var r=n.length/2;return r%1==0?(n[r-1]+n[r])/2:n[Math.floor(r)]}function f(n,r){return n.sort(function(n,t){return r(n)-r(t)})}function c(){function n(n){f(n,r);for(var a=n.length,c=[],M=[],d=[],s=0;s<a;s++){d[s]=1;var p=n[s];c[s]=r(p),M[s]=t(p)}h(c),h(M),h(d),l(c);var w=Math.floor(e*a);if(w<2)throw{error:"Bandwidth too small."};for(var b=[],x=[],y=[],m=0;m<a;m++)b[m]=0,x[m]=0,y[m]=1;for(var q=-1;++q<=o;){for(var S=[0,w-1],L=void 0,P=0;P<a;P++){L=c[P],P>0&&v(c,d,P,S);for(var j=S[0],k=S[1],_=c[P]-c[j]>c[k]-c[P]?j:k,B=0,E=0,F=0,I=0,O=0,Q=Math.abs(1/(c[_]-L)),z=j;z<=k;++z){var A=c[z],C=M[z],D=z<P?L-A:A-L,G=g(D*Q)*y[z]*d[z],H=A*G;B+=G,E+=H,F+=A*H,I+=C*G,O+=C*H}var J=E/B,K=I/B,N=O/B,R=F/B,T=Math.sqrt(Math.abs(R-J*J))<u?0:(N-J*K)/(R-J*J),U=K-T*J;b[P]=T*L+U,x[P]=Math.abs(M[P]-b[P])}if(q===o)break;var V=i(x);if(Math.abs(V)<u)break;for(var W=void 0,X=void 0,Y=0;Y<a;Y++)W=x[Y]/(6*V),y[Y]=W>=1?0:(X=1-W*W)*X}return b.map(function(n,r){return[c[r],n]})}var r=function(n){return n[0]},t=function(n){return n[1]},e=.3,o=2,u=1e-12;return n.bandwidth=function(r){return arguments.length?(e=r,n):e},n.x=function(t){return arguments.length?(r=t,n):r},n.y=function(r){return arguments.length?(t=r,n):t},n}function h(n){for(var r=0,t=n.length;r<t;r++)if(!isFinite(n[r]))return!1;return!0}function l(n){for(var r=0,t=n.length;r<t;r++)if(n[r-1]>=n[r])return!1;return!0}function g(n){return(n=1-n*n*n)*n*n}function v(n,r,t,e){var o=e[0],u=e[1],a=M(r,u);if(a<n.length&&n[a]-n[t]<n[t]-n[o]){var i=M(r,o);e[0]=i,e[1]=a}}function M(n,r){for(var t=r+1;t<n.length&&0===n[t];)t++;return t}function d(){function n(n){for(var a=n.length,i=0,f=0,c=0,h=0,l=t?+t[0]:1/0,g=t?+t[1]:-(1/0),v=0;v<a;v++){var M=n[v],d=e(M),s=u(M);i+=Math.log(d),f+=s*Math.log(d),c+=s,h+=Math.pow(Math.log(d),2),t||(d<l&&(l=d),d>g&&(g=d))}var p=(a*f-c*i)/(a*h-i*i),w=(c-p*i)/a,b=function(n){return p*Math.log(n)+w},x=o(l,g,b);return x.a=p,x.b=w,x.predict=b,x.rSquared=r(n,e,u,c,b),x}var t,e=function(n){return n[0]},u=function(n){return n[1]};return n.domain=function(r){return arguments.length?(t=r,n):t},n.x=function(r){return arguments.length?(e=r,n):e},n.y=function(r){return arguments.length?(u=r,n):u},n}function s(){function n(n){for(var a=n.length,i=0,f=0,c=0,h=0,l=0,g=t?+t[0]:1/0,v=t?+t[1]:-(1/0),M=0;M<a;M++){var d=n[M],s=e(d),p=u(d);i+=Math.log(s),f+=Math.log(p)*Math.log(s),c+=Math.log(p),h+=Math.pow(Math.log(s),2),l+=p,t||(s<g&&(g=s),s>v&&(v=s))}var w=(a*f-i*c)/(a*h-Math.pow(i,2)),b=Math.exp((c-w*i)/a),x=function(n){return b*Math.pow(n,w)},y=o(g,v,x);return y.a=b,y.b=w,y.predict=x,y.rSquared=r(n,e,u,l,x),y}var t,e=function(n){return n[0]},u=function(n){return n[1]};return n.domain=function(r){return arguments.length?(t=r,n):t},n.x=function(r){return arguments.length?(e=r,n):e},n.y=function(r){return arguments.length?(u=r,n):u},n}function p(){function n(n){for(var a=n.length,i=0,f=0,c=0,h=0,l=0,g=0,v=0,M=t?+t[0]:1/0,d=t?+t[1]:-(1/0),s=0;s<a;s++){var p=n[s],w=e(p),b=u(p),x=Math.pow(w,2);i+=w,f+=b,c+=x,h+=Math.pow(w,3),l+=Math.pow(w,4),g+=w*b,v+=x*b,t||(w<M&&(M=w),w>d&&(d=w))}var y=c-Math.pow(i,2)/a,m=g-i*f/a,q=h-c*i/a,S=v-c*f/a,L=l-Math.pow(c,2)/a,P=(S*y-m*q)/(y*L-Math.pow(q,2)),j=(m*L-S*q)/(y*L-Math.pow(q,2)),k=f/a-j*(i/a)-P*(c/a),_=function(n){return P*Math.pow(n,2)+j*n+k},B=o(M,d,_);return B.a=P,B.b=j,B.c=k,B.predict=_,B.rSquared=r(n,e,u,f,_),B}var t,e=function(n){return n[0]},u=function(n){return n[1]};return n.domain=function(r){return arguments.length?(t=r,n):t},n.x=function(r){return arguments.length?(e=r,n):e},n.y=function(r){return arguments.length?(u=r,n):u},n}n.regressionExp=u,n.regressionLinear=a,n.regressionLoess=c,n.regressionLog=d,n.regressionPow=s,n.regressionQuad=p,Object.defineProperty(n,"__esModule",{value:!0})});
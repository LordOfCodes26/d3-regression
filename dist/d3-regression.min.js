!function(r,n){"object"==typeof exports&&"undefined"!=typeof module?n(exports):"function"==typeof define&&define.amd?define(["exports"],n):(r=r||self,n(r.d3=r.d3||{}))}(this,function(r){"use strict";function n(r){return r[0]}function t(r){return r[1]}function e(){function r(r){for(var n=r.length,t=0,a=0,f=0,i=0,h=e?+e[0]:1/0,c=e?+e[1]:-(1/0),v=0;v<n;v++){var s=o(r[v]),l=u(r[v]);t+=s,a+=l,f+=s*l,i+=s*s,e||(s<h&&(h=s),s>c&&(c=s))}var p=n*f,d=t*a,g=n*i,M=t*t,w=(p-d)/(g-M),b=a,y=w*t,m=(b-y)/n,x=[[h,h*w+m],[c,c*w+m]];return x.slope=w,x.intercept=m,x}var e,o=n,u=t;return r.domain=function(n){return arguments.length?(e=n,r):e},r.x=function(n){return arguments.length?(o=n,r):o},r.y=function(n){return arguments.length?(u=n,r):u},r}function o(r){r.sort(function(r,n){return r-n});var n=r.length/2;return n%1==0?(r[n-1]+r[n])/2:r[Math.floor(n)]}function u(){function r(r){for(var n=r.length,t=[],l=[],p=[],d=0;d<n;d++){p[d]=1;var g=r[d];t[d]=e(g),l[d]=u(g)}a(t),a(l),a(p),f(t);var M=Math.floor(c*n);if(M<2)throw{error:"Bandwidth too small."};for(var w=[],b=[],y=[],m=0;m<n;m++)w[m]=0,b[m]=0,y[m]=1;for(var x=-1;++x<=v;){for(var j=[0,M-1],k=void 0,q=0;q<n;q++){k=t[q],q>0&&h(t,p,q,j);for(var L=j[0],_=j[1],B=t[q]-t[L]>t[_]-t[q]?L:_,F=0,O=0,P=0,Q=0,S=0,z=Math.abs(1/(t[B]-k)),A=L;A<=_;++A){var C=t[A],D=l[A],E=A<q?k-C:C-k,G=i(E*z)*y[A]*p[A],H=C*G;F+=G,O+=H,P+=C*H,Q+=D*G,S+=D*H}var I=O/F,J=Q/F,K=S/F,N=P/F,R=Math.sqrt(Math.abs(N-I*I))<s?0:(K-I*J)/(N-I*I),T=J-R*I;w[q]=R*k+T,b[q]=Math.abs(l[q]-w[q])}if(x===v)break;var U=o(b);if(Math.abs(U)<s)break;for(var V=void 0,W=void 0,X=0;X<n;X++)V=b[X]/(6*U),y[X]=V>=1?0:(W=1-V*V)*W}return w.map(function(r,n){return[t[n],r]})}var e=n,u=t,c=.3,v=2,s=1e-12;return r.bandwidth=function(n){return arguments.length?(c=n,r):c},r.x=function(n){return arguments.length?(e=n,r):e},r.y=function(n){return arguments.length?(u=n,r):u},r}function a(r){for(var n=0,t=r.length;n<t;n++)if(!isFinite(r[n]))return!1;return!0}function f(r){for(var n=0,t=r.length;n<t;n++)if(r[n-1]>=r[n])return!1;return!0}function i(r){return(r=1-r*r*r)*r*r}function h(r,n,t,e){var o=e[0],u=e[1],a=c(n,u);if(a<r.length&&r[a]-r[t]<r[t]-r[o]){var f=c(n,o);e[0]=f,e[1]=a}}function c(r,n){for(var t=n+1;t<r.length&&0===r[t];)t++;return t}function v(){function r(r){for(var n=r.length,t=0,a=0,f=0,i=0,h=0,c=0,v=0,s=[],l=0;l<n;l++){var p=r[l],d=o(p),g=u(p),M=Math.pow(d,2);t+=d,a+=g,f+=M,i+=Math.pow(d,3),h+=Math.pow(d,4),c+=d*g,v+=M*g,s.push(d)}var w=f-Math.pow(t,2)/n,b=c-t*a/n,y=i-f*t/n,m=v-f*a/n,x=h-Math.pow(f,2)/n,j=(m*w-b*y)/(w*x-Math.pow(y,2)),k=(b*x-m*y)/(w*x-Math.pow(y,2)),q=a/n-k*(t/n)-j*(f/n),L=1-Math.pow(a-j*f-k*t-q,2)/Math.pow(a-a/n,2);e&&(s.unshift(e[0]),s.push(e[1]));for(var _=[],B=0,F=s.length;B<F;B++){var O=s[B];_.push([O,function(r){return j*Math.pow(r,2)+k*r+q}(O)])}return _.a=j,_.b=k,_.c=q,_.rSquared=L,_}var e,o=n,u=t;return r.domain=function(n){return arguments.length?(e=n,r):e},r.x=function(n){return arguments.length?(o=n,r):o},r.y=function(n){return arguments.length?(u=n,r):u},r}r.regressionLinear=e,r.regressionLoess=u,r.regressionQuadratic=v,Object.defineProperty(r,"__esModule",{value:!0})});
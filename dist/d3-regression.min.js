!function(n,r){"object"==typeof exports&&"undefined"!=typeof module?r(exports):"function"==typeof define&&define.amd?define(["exports"],r):(n=n||self,r(n.d3=n.d3||{}))}(this,function(n){"use strict";function r(n,r,t,e,o){for(var u=n.length,a=0,i=0,f=0;f<u;f++){var c=n[f],h=r(c),l=t(c),g=o(h);a+=Math.pow(l-g,2),i+=Math.pow(l-e/u,2)}return 1-a/i}function t(n){return 180*Math.atan2(n[1][1]-n[0][1],n[1][0]-n[0][0])/Math.PI}function e(n){return[(n[0][0]+n[1][0])/2,(n[0][1]+n[1][1])/2]}function o(n,r,o){function u(n){return[n,o(n)]}for(var a=.01,i=[u(n),u(r)],f=0;function(n){f++;for(var r=n.length,o=!1,i=0;i<r-1;i++){var c=n[i],h=n[i+1],l=e([c,h]),g=u(l[0]),v=t([c,l]),M=t([c,g]);Math.abs(v-M)>a&&(n.splice(i+1,0,g),o=!0)}return o}(i)&&f<1e4;);return i}function u(){function n(n){for(var a=n.length,i=0,f=0,c=0,h=0,l=0,g=t?+t[0]:1/0,v=t?+t[1]:-(1/0),M=0;M<a;M++){var d=n[M],p=e(d),s=u(d);i+=s,f+=p*p*s,c+=s*Math.log(s),h+=p*s*Math.log(s),l+=p*s,t||(p<g&&(g=p),p>v&&(v=p))}var w=i*f-l*l,b=Math.exp((f*c-l*h)/w),x=(i*h-l*c)/w,y=function(n){return b*Math.exp(x*n)},m=o(g,v,y);return m.a=b,m.b=x,m.predict=y,m.rSquared=r(n,e,u,i,y),m}var t,e=function(n){return n[0]},u=function(n){return n[1]};return n.domain=function(r){return arguments.length?(t=r,n):t},n.x=function(r){return arguments.length?(e=r,n):e},n.y=function(r){return arguments.length?(u=r,n):u},n}function a(){function n(n){for(var o=n.length,u=0,a=0,i=0,f=0,c=r?+r[0]:1/0,h=r?+r[1]:-(1/0),l=0;l<o;l++){var g=t(n[l]),v=e(n[l]);u+=g,a+=v,i+=g*v,f+=g*g,r||(g<c&&(c=g),g>h&&(h=g))}for(var M=o*i,d=u*a,p=o*f,s=u*u,w=(M-d)/(p-s),b=a,x=w*u,y=(b-x)/o,m=function(n){return w*n+y},q=0,S=0,L=0;L<o;L++){var P=n[L],j=t(P),k=e(P),_=m(j);q+=Math.pow(k-_,2),S+=Math.pow(k-a/o,2)}var B=1-q/S,E=[[c,c*w+y],[h,h*w+y]];return E.a=w,E.b=y,E.predict=m,E.rSquared=B,E}var r,t=function(n){return n[0]},e=function(n){return n[1]};return n.domain=function(t){return arguments.length?(r=t,n):r},n.x=function(r){return arguments.length?(t=r,n):t},n.y=function(r){return arguments.length?(e=r,n):e},n}function i(n){n.sort(function(n,r){return n-r});var r=n.length/2;return r%1==0?(n[r-1]+n[r])/2:n[Math.floor(r)]}function f(n,r){return n.sort(function(n,t){return r(n)-r(t)})}function c(){function n(n){f(n,r);for(var a=n.length,c=[],M=[],d=[],p=0;p<a;p++){d[p]=1;var s=n[p];c[p]=r(s),M[p]=t(s)}h(c),h(M),h(d),l(c);var w=Math.floor(e*a);if(w<2)throw{error:"Bandwidth too small."};for(var b=[],x=[],y=[],m=0;m<a;m++)b[m]=0,x[m]=0,y[m]=1;for(var q=-1;++q<=o;){for(var S=[0,w-1],L=void 0,P=0;P<a;P++){L=c[P],P>0&&v(c,d,P,S);for(var j=S[0],k=S[1],_=c[P]-c[j]>c[k]-c[P]?j:k,B=0,E=0,F=0,I=0,O=0,Q=Math.abs(1/(c[_]-L)),z=j;z<=k;++z){var A=c[z],C=M[z],D=z<P?L-A:A-L,G=g(D*Q)*y[z]*d[z],H=A*G;B+=G,E+=H,F+=A*H,I+=C*G,O+=C*H}var J=E/B,K=I/B,N=O/B,R=F/B,T=Math.sqrt(Math.abs(R-J*J))<u?0:(N-J*K)/(R-J*J),U=K-T*J;b[P]=T*L+U,x[P]=Math.abs(M[P]-b[P])}if(q===o)break;var V=i(x);if(Math.abs(V)<u)break;for(var W=void 0,X=void 0,Y=0;Y<a;Y++)W=x[Y]/(6*V),y[Y]=W>=1?0:(X=1-W*W)*X}return b.map(function(n,r){return[c[r],n]})}var r=function(n){return n[0]},t=function(n){return n[1]},e=.3,o=2,u=1e-12;return n.bandwidth=function(r){return arguments.length?(e=r,n):e},n.x=function(t){return arguments.length?(r=t,n):r},n.y=function(r){return arguments.length?(t=r,n):t},n}function h(n){for(var r=0,t=n.length;r<t;r++)if(!isFinite(n[r]))return!1;return!0}function l(n){for(var r=0,t=n.length;r<t;r++)if(n[r-1]>=n[r])return!1;return!0}function g(n){return(n=1-n*n*n)*n*n}function v(n,r,t,e){var o=e[0],u=e[1],a=M(r,u);if(a<n.length&&n[a]-n[t]<n[t]-n[o]){var i=M(r,o);e[0]=i,e[1]=a}}function M(n,r){for(var t=r+1;t<n.length&&0===n[t];)t++;return t}function d(){function n(n){for(var a=n.length,i=0,f=0,c=0,h=0,l=t?+t[0]:1/0,g=t?+t[1]:-(1/0),v=0;v<a;v++){var M=n[v],d=e(M),p=u(M);i+=Math.log(d),f+=p*Math.log(d),c+=p,h+=Math.pow(Math.log(d),2),t||(d<l&&(l=d),d>g&&(g=d))}var s=(a*f-c*i)/(a*h-i*i),w=(c-s*i)/a,b=function(n){return s*Math.log(n)+w},x=o(l,g,b);return x.a=s,x.b=w,x.predict=b,x.rSquared=r(n,e,u,c,b),x}var t,e=function(n){return n[0]},u=function(n){return n[1]};return n.domain=function(r){return arguments.length?(t=r,n):t},n.x=function(r){return arguments.length?(e=r,n):e},n.y=function(r){return arguments.length?(u=r,n):u},n}function p(){function n(n){for(var a=n.length,i=0,f=0,c=0,h=0,l=0,g=t?+t[0]:1/0,v=t?+t[1]:-(1/0),M=0;M<a;M++){var d=n[M],p=e(d),s=u(d);i+=Math.log(p),f+=Math.log(s)*Math.log(p),c+=Math.log(s),h+=Math.pow(Math.log(p),2),l+=s,t||(p<g&&(g=p),p>v&&(v=p))}var w=(a*f-i*c)/(a*h-Math.pow(i,2)),b=Math.exp((c-w*i)/a),x=function(n){return b*Math.pow(n,w)},y=o(g,v,x);return y.a=b,y.b=w,y.predict=x,y.rSquared=r(n,e,u,l,x),y}var t,e=function(n){return n[0]},u=function(n){return n[1]};return n.domain=function(r){return arguments.length?(t=r,n):t},n.x=function(r){return arguments.length?(e=r,n):e},n.y=function(r){return arguments.length?(u=r,n):u},n}function s(){function n(n){for(var a=n.length,i=0,f=0,c=0,h=0,l=0,g=0,v=0,M=t?+t[0]:1/0,d=t?+t[1]:-(1/0),p=0;p<a;p++){var s=n[p],w=e(s),b=u(s),x=Math.pow(w,2);i+=w,f+=b,c+=x,h+=Math.pow(w,3),l+=Math.pow(w,4),g+=w*b,v+=x*b,t||(w<M&&(M=w),w>d&&(d=w))}var y=c-Math.pow(i,2)/a,m=g-i*f/a,q=h-c*i/a,S=v-c*f/a,L=l-Math.pow(c,2)/a,P=(S*y-m*q)/(y*L-Math.pow(q,2)),j=(m*L-S*q)/(y*L-Math.pow(q,2)),k=f/a-j*(i/a)-P*(c/a),_=function(n){return P*Math.pow(n,2)+j*n+k},B=o(M,d,_);return B.a=P,B.b=j,B.c=k,B.predict=_,B.rSquared=r(n,e,u,f,_),B}var t,e=function(n){return n[0]},u=function(n){return n[1]};return n.domain=function(r){return arguments.length?(t=r,n):t},n.x=function(r){return arguments.length?(e=r,n):e},n.y=function(r){return arguments.length?(u=r,n):u},n}n.regressionExp=u,n.regressionLinear=a,n.regressionLoess=c,n.regressionLog=d,n.regressionPow=p,n.regressionQuad=s,Object.defineProperty(n,"__esModule",{value:!0})});
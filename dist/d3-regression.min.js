!function(n,r){"object"==typeof exports&&"undefined"!=typeof module?r(exports):"function"==typeof define&&define.amd?define(["exports"],r):(n=n||self,r(n.d3=n.d3||{}))}(this,function(n){"use strict";function r(n,r){return n.sort(function(n,t){return r(n)-r(t)})}function t(){function n(n){r(n,e);for(var u=n.length,a=0,i=0,f=0,h=0,c=0,v=0;v<n.length;v++){var l=n[v],g=e(l),M=o(l);a+=M,i+=g*g*M,f+=M*Math.log(M),h+=g*M*Math.log(M),c+=g*M}for(var p=a*i-c*c,s=Math.exp((i*f-c*h)/p),d=(a*h-c*f)/p,w=function(n){return s*Math.exp(d*n)},b=[],x=0,y=0,m=0;m<u;m++){var q=n[m],S=e(q),L=o(q),P=w(S);x+=Math.pow(L-P,2),y+=Math.pow(L-a/u,2),b[m]=[S,P]}var j=1-x/y;if(t){var k=t[0],_=t[1];k<e(n[0])&&b.unshift([k,w(k)]),_>e(n[n.length-1])&&b.push([_,w(_)])}return b.a=s,b.b=d,b.rSquared=j,b.predict=w,b}var t,e=function(n){return n[0]},o=function(n){return n[1]};return n.domain=function(r){return arguments.length?(t=r,n):t},n.x=function(r){return arguments.length?(e=r,n):e},n.y=function(r){return arguments.length?(o=r,n):o},n}function e(){function n(n){for(var o=n.length,u=0,a=0,i=0,f=0,h=r?+r[0]:1/0,c=r?+r[1]:-(1/0),v=0;v<o;v++){var l=t(n[v]),g=e(n[v]);u+=l,a+=g,i+=l*g,f+=l*l,r||(l<h&&(h=l),l>c&&(c=l))}for(var M=o*i,p=u*a,s=o*f,d=u*u,w=(M-p)/(s-d),b=a,x=w*u,y=(b-x)/o,m=function(n){return w*n+y},q=0,S=0,L=0;L<o;L++){var P=n[L],j=t(P),k=e(P),_=m(j);q+=Math.pow(k-_,2),S+=Math.pow(k-a/o,2)}var B=1-q/S,E=[[h,h*w+y],[c,c*w+y]];return E.a=w,E.b=y,E.rSquared=B,E.predict=m,E}var r,t=function(n){return n[0]},e=function(n){return n[1]};return n.domain=function(t){return arguments.length?(r=t,n):r},n.x=function(r){return arguments.length?(t=r,n):t},n.y=function(r){return arguments.length?(e=r,n):e},n}function o(n){n.sort(function(n,r){return n-r});var r=n.length/2;return r%1==0?(n[r-1]+n[r])/2:n[Math.floor(r)]}function u(){function n(n){r(n,t);for(var l=n.length,g=[],M=[],p=[],s=0;s<l;s++){p[s]=1;var d=n[s];g[s]=t(d),M[s]=e(d)}a(g),a(M),a(p),i(g);var w=Math.floor(u*l);if(w<2)throw{error:"Bandwidth too small."};for(var b=[],x=[],y=[],m=0;m<l;m++)b[m]=0,x[m]=0,y[m]=1;for(var q=-1;++q<=c;){for(var S=[0,w-1],L=void 0,P=0;P<l;P++){L=g[P],P>0&&h(g,p,P,S);for(var j=S[0],k=S[1],_=g[P]-g[j]>g[k]-g[P]?j:k,B=0,E=0,F=0,I=0,O=0,Q=Math.abs(1/(g[_]-L)),z=j;z<=k;++z){var A=g[z],C=M[z],D=z<P?L-A:A-L,G=f(D*Q)*y[z]*p[z],H=A*G;B+=G,E+=H,F+=A*H,I+=C*G,O+=C*H}var J=E/B,K=I/B,N=O/B,R=F/B,T=Math.sqrt(Math.abs(R-J*J))<v?0:(N-J*K)/(R-J*J),U=K-T*J;b[P]=T*L+U,x[P]=Math.abs(M[P]-b[P])}if(q===c)break;var V=o(x);if(Math.abs(V)<v)break;for(var W=void 0,X=void 0,Y=0;Y<l;Y++)W=x[Y]/(6*V),y[Y]=W>=1?0:(X=1-W*W)*X}return b.map(function(n,r){return[g[r],n]})}var t=function(n){return n[0]},e=function(n){return n[1]},u=.3,c=2,v=1e-12;return n.bandwidth=function(r){return arguments.length?(u=r,n):u},n.x=function(r){return arguments.length?(t=r,n):t},n.y=function(r){return arguments.length?(e=r,n):e},n}function a(n){for(var r=0,t=n.length;r<t;r++)if(!isFinite(n[r]))return!1;return!0}function i(n){for(var r=0,t=n.length;r<t;r++)if(n[r-1]>=n[r])return!1;return!0}function f(n){return(n=1-n*n*n)*n*n}function h(n,r,t,e){var o=e[0],u=e[1],a=c(r,u);if(a<n.length&&n[a]-n[t]<n[t]-n[o]){var i=c(r,o);e[0]=i,e[1]=a}}function c(n,r){for(var t=r+1;t<n.length&&0===n[t];)t++;return t}function v(){function n(n){r(n,e);for(var u=n.length,a=0,i=0,f=0,h=0,c=0;c<u;c++){var v=n[c],l=e(v),g=o(v);a+=Math.log(l),i+=g*Math.log(l),f+=g,h+=Math.pow(Math.log(l),2)}for(var M=(u*i-f*a)/(u*h-a*a),p=(f-M*a)/u,s=function(n){return M*Math.log(n)+p},d=[],w=0,b=0,x=0;x<u;x++){var y=n[x],m=e(y),q=o(y),S=s(m);w+=Math.pow(q-S,2),b+=Math.pow(q-f/u,2),d[x]=[m,S]}var L=1-w/b;if(t){var P=t[0],j=t[1];P<e(n[0])&&d.unshift([P,s(P)]),j>e(n[n.length-1])&&d.push([j,s(j)])}return d.a=M,d.b=p,d.rSquared=L,d.predict=s,d}var t,e=function(n){return n[0]},o=function(n){return n[1]};return n.domain=function(r){return arguments.length?(t=r,n):t},n.x=function(r){return arguments.length?(e=r,n):e},n.y=function(r){return arguments.length?(o=r,n):o},n}function l(){function n(n){r(n,e);for(var u=n.length,a=0,i=0,f=0,h=0,c=0,v=0;v<u;v++){var l=n[v],g=e(l),M=o(l);a+=Math.log(g),i+=Math.log(M)*Math.log(g),f+=Math.log(M),h+=Math.pow(Math.log(g),2),c+=M}for(var p=(u*i-a*f)/(u*h-Math.pow(a,2)),s=Math.exp((f-p*a)/u),d=function(n){return s*Math.pow(n,p)},w=[],b=0,x=0,y=0;y<u;y++){var m=n[y],q=e(m),S=o(m),L=d(q);b+=Math.pow(S-L,2),x+=Math.pow(S-c/u,2),w[y]=[q,L]}var P=1-b/x;if(t){var j=t[0],k=t[1];j<e(n[0])&&w.unshift([j,d(j)]),k>e(n[n.length-1])&&w.push([k,d(k)])}return w.a=s,w.b=p,w.rSquared=P,w.predict=d,w}var t,e=function(n){return n[0]},o=function(n){return n[1]};return n.domain=function(r){return arguments.length?(t=r,n):t},n.x=function(r){return arguments.length?(e=r,n):e},n.y=function(r){return arguments.length?(o=r,n):o},n}function g(n,r,t,e,o){for(var u=n.length,a=0,i=0,f=0;f<u;f++){var h=n[f],c=r(h),v=t(h),l=o(c);a+=Math.pow(v-l,2),i+=Math.pow(v-e/u,2)}return 1-a/i}function M(n){return 180*Math.atan2(n[1][1]-n[0][1],n[1][0]-n[0][0])/Math.PI}function p(n){return[(n[0][0]+n[1][0])/2,(n[0][1]+n[1][1])/2]}function s(n,r,t){function e(n){return[n,t(n)]}for(var o=.2,u=[e(n),e(r)],a=0;function(n){a++;for(var r=n.length,t=!1,u=0;u<r-1;u++){var i=n[u],f=n[u+1],h=p([i,f]),c=e(h[0]),v=M([i,h]),l=M([i,c]);Math.abs(v-l)>o&&(n.splice(u+1,0,c),t=!0)}return t}(u)&&a<1e4;);return u}function d(){function n(n){r(n,e);for(var u=n.length,a=0,i=0,f=0,h=0,c=0,v=0,l=0,M=t?+t[0]:1/0,p=t?+t[1]:-(1/0),d=0;d<u;d++){var w=n[d],b=e(w),x=o(w),y=Math.pow(b,2);a+=b,i+=x,f+=y,h+=Math.pow(b,3),c+=Math.pow(b,4),v+=b*x,l+=y*x,t||(b<M&&(M=b),b>p&&(p=b))}var m=f-Math.pow(a,2)/u,q=v-a*i/u,S=h-f*a/u,L=l-f*i/u,P=c-Math.pow(f,2)/u,j=(L*m-q*S)/(m*P-Math.pow(S,2)),k=(q*P-L*S)/(m*P-Math.pow(S,2)),_=i/u-k*(a/u)-j*(f/u),B=function(n){return j*Math.pow(n,2)+k*n+_},E=s(M,p,B);return E.a=j,E.b=k,E.c=_,E.predict=B,E.rSquared=g(n,e,o,i,B),E}var t,e=function(n){return n[0]},o=function(n){return n[1]};return n.domain=function(r){return arguments.length?(t=r,n):t},n.x=function(r){return arguments.length?(e=r,n):e},n.y=function(r){return arguments.length?(o=r,n):o},n}n.regressionExp=t,n.regressionLinear=e,n.regressionLoess=u,n.regressionLog=v,n.regressionPow=l,n.regressionQuad=d,Object.defineProperty(n,"__esModule",{value:!0})});